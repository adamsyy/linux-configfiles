"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[801],{3036:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var o=i(98135),a=i.n(o),r=(i(33948),i(67294)),n=i(58879),s=i(45016),l=i(89940),d=i(27832),u=i(3403),c=i(97812),p=i(5366),g=i(43250),m=i(77420),f=i(40039),b=i(91149),v=i(50906),h=i(56200),y=i(85227),_=i(70043),M=i(3779);function F(){const e=(0,n.O7)();return a()(c.Z,{className:g.wG,title:a()(p.FormattedMessage,{id:"developerIntegrationNotFound.title.label",defaultMessage:"Not Found"}),subtitle:a()(p.FormattedMessage,{id:"developerIntegrationNotFound.subtitle.label",defaultMessage:"This integration doesn’t exist."}),onNavigateBack:()=>(0,s.A1)(e),icon:M.Z.eyes({width:98,height:98}),sideContent:null},void 0,null)}var w=i(80574),S=i(97880);function I(e){const{botOrIntegrationPointer:t}=e,i=(0,n.O7)(),[{currentUserStore:o}]=(0,l.oR)(d.default),[,,M]=(0,l.oR)(void 0,y.Z),I=(0,l.Kw)(M),k=(0,l.VK)((()=>{if(t&&o){const e=o.getRecordValue(t);if(e)return{value:e,table:t.table}}}),[o,t]);(0,r.useEffect)((()=>{k&&(M.initializeNewForm(k),v.DUp(i,{table:k.table}))}),[M,i,k]);const Z=(0,w.V)({value:I.startingRecord});if("rejected"===Z.status||!t)return a()(F,{});if("pending"===Z.status)return a()(u.Z,{});"resolved"!==Z.status&&(0,S.t1)(Z);const C=Z.value,T=C.value.name,B=C.table===m.c?C.value.icon:C.value.info.icon,x={id:C.value.id,table:C.table},R=B?{pointer:x,icon:B}:void 0;return a()(c.Z,{className:g.TF,title:T,subtitle:a()(p.FormattedMessage,{id:"developerIntegrationView.subtitle.label",defaultMessage:"Review and edit integration information."}),onNavigateBack:()=>(0,s.A1)(i),icon:a()(f.Z,{disabled:!0,icon:R,title:T,isEmptyPage:!1,size:98,isLarge:!0,style:{boxShadow:_.Z.frontDeepShadow},useInvertedColors:!0}),sideContent:a()(h.T,{integrationFormStore:M})},void 0,a()(b.Z,{integrationFormStore:M}))}},8871:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var o=i(98135),a=i.n(o),r=(i(33948),i(67294),i(97812)),n=i(5366),s=i(43250),l=i(91149),d=i(56200),u=i(89940),c=i(85227);function p(e){const{onClose:t,onSuccess:i}=e,[,,o]=(0,u.oR)(void 0,c.Z);return a()(r.Z,{className:s.Zp,title:a()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.title.label",defaultMessage:"Create a new integration"}),subtitle:a()(n.FormattedMessage,{id:"developerIntegrationsCreateInternal.subtitle.label",defaultMessage:"We’ll walk you through how to setup a new integration."}),onNavigateBack:t,sideContent:a()(d.T,{integrationFormStore:o})},void 0,a()(l.Z,{onCreateNew:i,integrationFormStore:o,shouldAutoFocusFirstField:!0}))}},91149:(e,t,i)=>{i.d(t,{Z:()=>Ie});var o=i(67154),a=i.n(o),r=i(98135),n=i.n(r),s=(i(33948),i(73210),i(96486)),l=i(67294),d=i.n(l),u=i(5366),c=i(77420),p=i(9844),g=i(97880),m=i(89940),f=i(27832),b=i(90031),v=i(64442),h=i(3779),y=i(98481),_=i(42402),M=i(89101),F=i(8848),w=i(38381);function S(e){const{onSubmit:t,children:i,submitType:o,capabilitiesHaveChanged:a}=e,r="create-bot"===o||"create-integration"===o;return n()("form",{id:"developer-integration-form",style:{minWidth:200,maxWidth:440,marginLeft:24,display:"flex",flexDirection:"column"},onSubmit:e=>{e.preventDefault(),"create-integration"===o?w.Z.setState({open:!0,isDestructive:!1,isWarning:!1,title:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.title",defaultMessage:"Switch to Public integration?"}),message:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.message",defaultMessage:"You‘ll get an OAuth secret and will need to implement OAuth for authorization. See <oauthdocumentationlink>developer docs</oauthdocumentationlink> for more information.",values:{oauthdocumentationlink:(...e)=>n()(_.Z,{href:M._j.developerOAuthDocs},void 0,e)}}),confirmationMessage:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.createIntegration.confirmationModal.confirm",defaultMessage:"Continue"}),onConfirm:()=>{t()}}):"update-integration"===o&&a?w.Z.setState({open:!0,isDestructive:!1,isWarning:!0,title:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.title",defaultMessage:"Change requested capabilities?"}),message:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.message",defaultMessage:"Any existing users of your integration will be required to re-authenticate."}),confirmationMessage:n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.updateIntegration.capabilities.confirmationModal.confirm",defaultMessage:"Change"}),onConfirm:()=>{t()}}):t()}},void 0,i,n()("div",{style:{display:"flex",marginTop:24,flexDirection:"row-reverse",alignItems:"center"}},void 0,n()(y.h,{onClick:()=>{const e=document.querySelector("form#developer-integration-form");if(e){const t=e.ownerDocument.createElement("input");t.style.display="none",t.type="submit",e.appendChild(t).click(),e.removeChild(t)}}},void 0,n()(I,{isCreate:r})),r&&n()("span",{style:{fontSize:15,color:F.ZP.frontTextLight,marginRight:42}},void 0,n()(u.FormattedMessage,{id:"developerIntegrationFormHandler.create.developerTerms",defaultMessage:"By submitting, you agree to Notion's <developertermslink>Developer Terms</developertermslink>.",values:{developertermslink:(...e)=>n()(_.Z,{href:M._j.developerTerms},void 0,e)}}))))}function I(e){const{isCreate:t}=e;return t?d().createElement(d().Fragment,null,n()("div",{style:{marginRight:4}},void 0,n()(u.FormattedMessage,{id:"formHandler.submitButton.create.label",defaultMessage:"Submit"})),h.Z.arrowRight({width:14,height:14})):n()(u.FormattedMessage,{id:"formHandler.submitButton.create.update",defaultMessage:"Save changes"})}var k=i(62727),Z=i(58879),C=i(66055),T=i(14947),B=i(37235),x=i(82990),R=i(74350);function N(e){const{fetchSecret:t,secretName:i,onCopy:o,onError:a,confirmationModalProps:r,hasSecretBeenViewed:s}=e,l=(0,Z.O7)(),[u,c]=d().useState();return n()(k.Z,{type:u?"text":"password",disabled:!0,style:{fontFamily:x.Z.getCompositeFontFamily(R.SP).mono,color:F.ZP.frontTextMedium},inputStyle:u?{cursor:"text"}:void 0,value:u||" ".repeat(40),right:n()("div",{style:{display:"flex"}},void 0,n()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),u?n()(P,{secretName:i,onClick:()=>{o&&o(),(0,C.RD)({environment:l,stringValue:u,copiedMessage:C.tq.copiedToClipboard})}}):n()(V,{hasSecretBeenViewed:s,onClick:async()=>{const e=async()=>{const e=await t();"secret"in e?c(e.secret):a(e.error.body.message)};r?w.Z.setState({...r,open:!0,onConfirm:e}):await e()}}))})}function V(e){const{onClick:t,hasSecretBeenViewed:i}=e;return n()(T.Z,{onClick:t,style:O.button},void 0,n()(u.FormattedMessage,i?{id:"formSecretShow.refreshSecret.label",defaultMessage:"Refresh"}:{id:"formSecretShow.showSecret.label",defaultMessage:"Show"}))}function P(e){const{onClick:t,secretName:i}=e,[o,r]=d().useState(!1),s=n()(u.FormattedMessage,o?{defaultMessage:"{secretName} copied",id:"formSecretShow.secretCopied.tooltip",description:"Tooltip shown when user copied integration secret to clipboard",values:{secretName:i}}:{defaultMessage:"Copy {secretName}",id:"formSecretShow.copySecret.tooltip",description:"Shortcut for copying a token from an integration management page; 'secretName' will be either 'secret' or 'token'",values:{secretName:i}});return n()(B.Z,{placement:B.Z.Placement.Top,renderTooltip:()=>s,render:e=>d().createElement(T.Z,a()({onClick:e=>{e.preventDefault(),r(!0),setTimeout((()=>{r(!1)}),1500),t()}},e,{style:{...O.button,color:o?F.ZP.mediumTextColor:F.ZP.blue}}),n()(u.FormattedMessage,o?{id:"formSecretShow.copied.label",defaultMessage:"Copied"}:{id:"formSecretShow.copySecret.label",defaultMessage:"Copy"}))})}const O={button:{display:"inline-flex",alignItems:"center",fontFamily:x.Z.getCompositeFontFamily(R.SP).sans,borderRadius:3,padding:"0 6px",height:24,color:F.ZP.blue}};var E=i(61269),D=i(64215),q=i(14598),z=i(47966),W=i(46951);function A(e){const{options:t,value:i,setValue:o}=e;return n()("div",{style:{display:"flex",flexDirection:"column"}},void 0,t.map(((e,a)=>n()(L,{option:e,value:i,setValue:o,isFirst:0===a,isLast:a===t.length-1},e.key))))}function L(e){const{option:t,value:i,setValue:o,isFirst:a,isLast:r}=e,s=(0,D.y)((e=>({outliner:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"auto",padding:18,whiteSpace:"normal",fontSize:15,background:e.whiteButtonBackground,borderTopLeftRadius:a?3:0,borderTopRightRadius:a?3:0,borderBottomLeftRadius:r?3:0,borderBottomRightRadius:r?3:0,...!a&&{borderTop:void 0}}})),[a,r]);return n()(z.Z,{onClick:()=>o(t.key),style:s.outliner},void 0,n()(q.Z,{title:t.title,isSelected:i===t.key,onClick:()=>{}},t.key),n()(W.Z,{isMultiline:!0,isSecondaryColor:!0,style:{marginLeft:24,marginTop:-4,fontSize:15}},void 0,t.caption))}var H=i(48243),U=i(4637),K=i(53471),$=i(68932);function j(e){const{value:t,setValue:i,setError:o}=e,a=(0,Z.O7)(),[r,s]=d().useState(!1);return d().createElement(d().Fragment,null,t&&n()(H.Z,{url:t,isAuthenticated:!1,stripGoogleIconQuery:!0,width:90,render:(e,t)=>n()("div",{style:{width:90,height:90}},void 0,n()(U.Z,{src:t,style:{width:90,height:90,objectFit:"cover",borderRadius:3}}))}),n()(z.Z,{isLarge:!0,style:{width:"fit-content",backgroundColor:"white"},onClick:()=>{(0,K.cR)({environment:a,onStart:()=>s(!0),bucket:"public",onError:e=>{o(e.message),s(!1)},onComplete:e=>{i(e[0]),s(!1)},accept:"image/*"})}},void 0,n()(u.FormattedMessage,{id:"formInputIcon.uploadButton.label",defaultMessage:"Upload image"}),r&&n()($.Z,{style:{marginLeft:4}})))}var G=i(66722),Y=i(25584),X=i(95009),Q=i(83071);function J(e){const{value:t}=e,[i,o]=d().useState(!1),r=()=>o(!1);return n()(G.GI,{popupType:G.GI.PopupType.Popup,alignmentToOrigin:G.GI.Alignment.Start,placementToOrigin:G.GI.Placement.Bottom,originGap:2,sameWidthAsOrigin:!0,open:i,onDismiss:r,render:()=>d().createElement(te,a()({},e,{value:t,onClose:r})),origin:d().createElement(ee,a()({},e,{value:t,onClick:()=>o(!0)}))})}function ee(e){const{onClick:t,value:i,renderMenuItem:o}=e,a=(0,D.y)((e=>({dropdown:{background:e.whiteButtonBackground,border:"1px solid ".concat(e.outlineButtonBorder),borderRadius:3,height:32},expandIcon:{height:12,width:12,fill:e.lightIconColor}})),[]);return d().createElement(d().Fragment,null,o({item:i,focused:!1,onClick:t,style:a.dropdown,right:h.Z.expand(a.expandIcon)}))}function te(e){const{keyName:t,items:i,value:o,setValue:a,renderMenuItem:r,onClose:s}=e;let l=0;const u=i.map(((e,t)=>(e.id===(null==o?void 0:o.id)&&(l=t),{key:e.id,action:()=>{a(e),s()},render:t=>r({...t,item:e})})));return n()(X.ZP,{menuType:X.ZP.MenuType.Popup},void 0,n()(Y.Z,{type:Y.Z.Type.Vertical,initialFocus:l,sections:[{key:"form-input-section-".concat(t),items:u,render:e=>d().createElement(Q.Z,e)}]}))}var ie=i(38755),oe=i(48762),ae=i(40039),re=i(79029);const ne=d().forwardRef(((e,t)=>{const{item:i,...o}=e,r=(0,Z.O7)(),s=(0,m.VK)((()=>i&&(0,ie.getSpaceIcon)(r,i)),[r,i]),l=(0,m.VK)((()=>i&&(0,ie.getSpaceName)(r,i)),[r,i]);return d().createElement(oe.Z,a()({},o,{ref:t,title:i&&n()(re.Z,{store:i}),icon:i&&n()(ae.Z,{disabled:!0,icon:s,title:l,isEmptyPage:!1,size:19})}))}));var se=i(50906),le=i(56200),de=i(81710);function ue(e){const{label:t,subtitle:i,caption:o,error:a,children:r}=e,s=(0,D.y)((()=>({label:{fontSize:15,fontWeight:x.Z.fontWeight.medium,color:F.ZP.frontTextMedium},subtitle:{fontSize:15,color:F.ZP.frontTextLight},caption:{fontSize:15,color:F.ZP.frontTextLight},error:{marginTop:4,fontSize:15,color:F.ZP.frontRed},field:{display:"grid",gridTemplateColumns:"1fr",gap:6,marginBottom:32}})),[]);return n()("label",{style:s.field},void 0,n()("div",{style:s.label},void 0,t),o&&n()("div",{style:s.caption},void 0,o),r,i&&n()("div",{style:s.subtitle},void 0,i),a&&n()("div",{style:s.error},void 0,a))}var ce=i(75246),pe=i(45016),ge=i(33665),me=i(47307),fe=i(43250),be=i(719),ve=i(85567),he=i(95477),ye=i(74181),_e=i(84619),Me=i(82970),Fe=i(83328);const we={token:function(e){const{currentValue:t,setErrorValue:i}=e,[{currentUserStore:o}]=(0,m.oR)(f.default),a=(0,Z.O7)(),r=(0,m.VK)((()=>{if(!o||!t)return;if(t.value.parent_table!==ce.bx)return;const e=v.Z.createChildStore(o,{id:t.value.parent_id,table:t.value.parent_table});return(0,ie.getSpaceName)(a,e)}),[o,t,a]);if(!t)return null;return d().createElement(d().Fragment,null,n()(N,{fetchSecret:async()=>{const e=await E.getBotToken(a,{botId:t.value.id});return"success"===e.type?(se.Cm3(a,{table:t.table}),{secret:e.data.token}):{error:e}},secretName:n()(u.FormattedMessage,{id:"developerIntegrationForm.botToken.secretName",defaultMessage:"token"}),onCopy:()=>{se.IVn(a,{table:t.table,from:"developer-integrations-view"})},onError:i}),r&&n()("div",{style:{fontSize:15,color:F.ZP.frontTextLight}},void 0,n()(u.FormattedMessage,{id:"developerIntegrationForm.botToken.subtitle",defaultMessage:"Only works with the <bold>{spaceName}</bold> workspace. To change workspace, <developertermslink>create another integration</developertermslink>.",values:{spaceName:r,bold:(...e)=>n()("b",{},void 0,e),developertermslink:(...e)=>n()(_.Z,{href:M._j.myIntegrations},void 0,e)}})))},client_id:function(e){const{currentValue:t}=e,i=(0,Z.O7)(),[o,r]=d().useState(!1);if(!t)return null;const s=n()(u.FormattedMessage,o?{defaultMessage:"ID copied",id:"developerIntegrationsForm.clientIdCopied.tooltip"}:{defaultMessage:"Copy client ID",id:"developerIntegrationsForm.copyClientId.tooltip"});return n()(k.Z,{type:"text",disabled:!0,style:{color:F.ZP.frontTextMedium,fontFamily:x.Z.getCompositeFontFamily(R.SP).mono},value:t.value.id,right:n()("div",{style:{display:"flex"}},void 0,n()("div",{style:{width:30,marginLeft:-30,height:24,backgroundImage:"linear-gradient(to left, #f7f7f3 20%, rgba(255, 255, 255, 0) 100%)",zIndex:1}}),n()(B.Z,{placement:B.Z.Placement.Top,renderTooltip:()=>s,render:e=>d().createElement(T.Z,a()({onClick:e=>{e.preventDefault(),r(!0),setTimeout((()=>{r(!1)}),1500),(0,C.RD)({environment:i,stringValue:t.value.id,copiedMessage:C.tq.copiedLinkToClipboard})}},e,{style:{display:"inline-flex",alignItems:"center",borderRadius:3,padding:"0 6px",height:24,color:o?F.ZP.frontTextMedium:F.ZP.blue,fontFamily:x.Z.getCompositeFontFamily(R.SP).sans}}),n()(u.FormattedMessage,o?{id:"developerIntegrationsForm.copiedId.label",defaultMessage:"Copied"}:{id:"developerIntegrationsForm.copyId.label",defaultMessage:"Copy"}))}))})},client_secret:function(e){const{currentValue:t,setErrorValue:i}=e,o=(0,Z.O7)(),[{currentUserStore:a}]=(0,m.oR)(f.default);if(!t||!a)return null;const r=t.value.info.has_viewed_secret,s=(0,b.Kv)(a,{id:t.value.id,table:p.K});return n()(N,{fetchSecret:async()=>{const e=await E.getIntegrationSecret(o,{integrationId:t.value.id});return"success"===e.type?((0,pe.bO)({environment:o,integrationStore:s}),se.Cm3(o,{table:t.table}),{secret:e.data.secret}):{error:e}},secretName:n()(u.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.secretName",defaultMessage:"secret"}),onCopy:()=>{se.IVn(o,{table:t.table,from:"developer-integrations-view"})},onError:i,hasSecretBeenViewed:r,confirmationModalProps:{isDestructive:!1,isWarning:!1,title:n()(u.FormattedMessage,r?{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Refresh OAuth client secret?"}:{id:"developerIntegrationForm.clientSecret.confirmationModal.title",defaultMessage:"Show OAuth client secret?"}),message:n()(u.FormattedMessage,r?{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"You’ve already viewed the client secret. Viewing again will revoke and generate a new one. Make sure you’re storing the secret securely."}:{id:"developerIntegrationForm.clientSecret.confirmationModal.message",defaultMessage:"This client secret will only be displayed once and cannot be viewed again. Make sure you’re storing the secret securely."}),confirmationMessage:n()(u.FormattedMessage,{id:"developerIntegrationForm.clientSecret.confirmationModal.confirm",defaultMessage:"Continue"})}})},name:Se,icon:function(e){const{currentValue:t,setNewValue:i,setErrorValue:o}=e;return n()(j,{value:t,setValue:i,setError:o})},space:function(e){const{spaces:t,currentValue:i,setNewValue:o,setErrorValue:a}=e,[r,s]=d().useState(!1);return(0,l.useEffect)((()=>{r||0!==t.length||(s(!0),a(n()(u.FormattedMessage,{id:"developerIntegrationsForm.spacePicker.missingSpacesError",defaultMessage:"You are not an admin of any workspaces. Please <linktonotion>create a new one</linktonotion> or ask your workspace admin to update your access.",values:{linktonotion:(...e)=>n()(_.Z,{href:(0,ge.UY)("guides.joinOrCreateWorkspace")},void 0,e)}})))}),[t,a,r]),n()(J,{keyName:"space",items:t,value:i,setValue:o,renderMenuItem:e=>d().createElement(ne,e)})},submission_type:function(e){const{currentValue:t,setNewValue:i}=e,o=(0,Z.O7)();if(!t)return null;return n()(A,{options:[{key:c.c,title:n()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.bot.title",defaultMessage:"Internal integration"}),caption:n()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.bot.caption",defaultMessage:"Only available for workspaces you’re an admin of. The integration can be installed to those workspaces automatically and does not require review."})},{key:p.K,title:n()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.integration.title",defaultMessage:"Public integration"}),caption:n()(u.FormattedMessage,{id:"developerInternalIntegration.integrationType.integration.caption",defaultMessage:"Available for any Notion user. May require review and verification for listing in the Integration Gallery."})}],value:t,setValue:e=>{i(e),se.kXt(o,{table:e})}})},redirect_uris:function(e){const{currentValue:t,setNewValue:i}=e,o=t||[],[r,s]=d().useState(""),l=()=>s("");return n()(G.ZP,{popupType:G.ZP.PopupType.Popup,sameWidthAsOrigin:!0,open:r.length>0,onDismiss:l,origin:n()(be.Z,{style:{background:F.ZP.white,minHeight:32,fontSize:15},placeholder:"",value:r,onChange:e=>s(e.target.value),tokens:o.map((e=>n()(ve.Z,{format:_e.l.Medium,showRemoveButton:!0,isSingle:!1,value:e,onClickRemove:()=>{i(o.filter((t=>t!==e)))}},e))),onRemoveLastToken:()=>{o.length>0&&i(o.slice(0,o.length-1))}}),render:()=>{const e=r.trim(),t=(0,ye.u)(he.default.domainBaseUrl,e).map((e=>({key:e,render:t=>d().createElement(oe.Z,a()({},t,{title:e})),action:()=>{l(),i([...o,e])}})));return n()(X.ZP,{menuType:X.ZP.MenuType.Popup},void 0,n()(Y.Z,{type:Y.Z.Type.Vertical,initialFocus:0,sections:[{key:"valid-redirect-uri-suggestion",items:t,render:e=>d().createElement(Q.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationsForm.redirectUri.typePrompt",defaultMessage:"Type a redirect uri…"})}))}]}))}})},website_url:Se,tagline:Se,privacy_policy_url:Se,terms_of_use_url:Se,email:Se,capabilities:function(e){const{currentValue:t,setNewValue:i}=e;return n()(Y.Z,{type:Y.Z.Type.Vertical,initialFocus:void 0,sections:[{key:"content_capabilities",items:[{key:"read_content",action:()=>null,render:e=>{const o=()=>{i(t?{...t,read_content:!t.read_content}:{read_content:!0,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.title",defaultMessage:"Read content"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_content.caption",defaultMessage:"Request to read content."}),icon:n()(Me.Z,{checked:Boolean(null==t?void 0:t.read_content),size:16,onClick:o}),onClick:o}))}},{key:"update_content",action:()=>null,render:e=>{const o=()=>{i(t?{...t,update_content:!t.update_content}:{read_content:!1,update_content:!0,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.title",defaultMessage:"Update content"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.update_content.caption",defaultMessage:"Request to update existing content."}),icon:n()(Me.Z,{checked:Boolean(null==t?void 0:t.update_content),size:16,onClick:o}),onClick:o}))}},{key:"insert_content",action:()=>null,render:e=>{const o=()=>{i(t?{...t,insert_content:!t.insert_content}:{read_content:!1,update_content:!1,insert_content:!0,read_user_without_email:!1,read_user_with_email:!1})};return d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.title",defaultMessage:"Insert content"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.insert_content.caption",defaultMessage:"Request to create new content."}),icon:n()(Me.Z,{checked:Boolean(null==t?void 0:t.insert_content),size:16,onClick:o}),onClick:o}))}}],render:e=>d().createElement(Q.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.content_capabilities.title",defaultMessage:"Content Capabilities"})}))},{key:"user_capabilities",items:[{key:"no_user_capabilities",action:()=>null,render:e=>d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.title",defaultMessage:"No user information"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.no_user_capabilities.caption",defaultMessage:"Do not request any user information access."}),icon:n()(Fe.Z,{isSelected:!Boolean((null==t?void 0:t.read_user_without_email)||(null==t?void 0:t.read_user_with_email))}),onClick:()=>{i(t?{...t,read_user_without_email:!1,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1})}}))},{key:"read_user_without_email",action:()=>null,render:e=>d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.title",defaultMessage:"Read user information without email addresses"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_without_email.caption",defaultMessage:"Request access to user information, not including email addresses."}),icon:n()(Fe.Z,{isSelected:(null==t?void 0:t.read_user_without_email)&&!(null!=t&&t.read_user_with_email)||!1}),onClick:()=>{i(t?{...t,read_user_without_email:!0,read_user_with_email:!1}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!1})}}))},{key:"read_user_with_email",action:()=>null,render:e=>d().createElement(oe.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.title",defaultMessage:"Read user information including email addresses"}),caption:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.read_user_with_email.caption",defaultMessage:"Request access to user information, including email addresses."}),icon:n()(Fe.Z,{isSelected:(null==t?void 0:t.read_user_with_email)||!1}),onClick:()=>{i(t?{...t,read_user_without_email:!0,read_user_with_email:!0}:{read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!0,read_user_with_email:!0})}}))}],render:e=>d().createElement(Q.Z,a()({},e,{title:n()(u.FormattedMessage,{id:"developerIntegrationForm.capabilities.user_capabilities.title",defaultMessage:"User Capabilities"})}))}]})}};function Se(e){const{autoFocus:t,currentValue:i,setNewValue:o}=e;return n()(k.Z,{autoFocus:t,style:{background:F.ZP.white,height:32,fontSize:15},value:i,onChange:e=>o(e.target.value)})}const Ie=(0,u.injectIntl)((function(e){var t;const{intl:i,integrationFormStore:o,onCreateNew:a,shouldAutoFocusFirstField:r}=e,c=(0,Z.O7)(),[{currentUserRootStore:p}]=(0,m.oR)(f.default),b=(0,m.Kw)(o),{type:v}=b,[h,y]=d().useReducer(de.x6,de.yb);(0,l.useEffect)((()=>{if(!p)return;const e=(0,de.hl)({formStoreState:b,userRootStore:p});for(const t of(0,g.Yd)(e))y({field:t,value:e[t]})}),[b,p]);const _=(0,m.VK)((()=>p?p.getAdminSpaceStores():[]),[p]),M=s.debounce((()=>{const e=(0,de.Xk)({formData:h,formStateType:v});e.forEach((e=>{y({field:e,error:n()(u.FormattedMessage,{id:"developerIntegrationsForm.error.missingRequired",defaultMessage:"{ fieldName } is required.",values:{fieldName:de.Rh[e].label}})})}));const t=(0,de.bd)({formData:h,formStateType:v});t.forEach((e=>{y({field:e.fieldName,error:e.errorMessage?i.formatMessage(e.errorMessage):n()(u.FormattedMessage,{id:"developerIntegrationsCreateInternal.error.invalidInput",defaultMessage:"{ fieldName } is invalid.",values:{fieldName:de.Rh[e.fieldName].label}})})}));if(e.length>0||t.length>0||(0,de.tm)({formData:h,formStateType:v})||!p)return;const o=(0,pe.JJ)({environment:c,formState:b,formData:(0,de.Xr)(h)});if(!o)return void me.showErrorMessage(n()(u.FormattedMessage,{id:"developerIntegrationsForm.error.submission",defaultMessage:"There was an error submitting your integration. Please try again or contact support if the issue persists."}));a&&a(o);const r=document.querySelector(".".concat(fe.rI));r&&r.scrollIntoView({behavior:"smooth"})}),300),F="on"===(0,Z.aq)("granular-bot-capabilities"),w=function(e,t){if(e&&t)for(const[i,o]of(0,g.qP)(t))if(Boolean(e[i])!==o)return!0;return!1}(null===(t=b.startingRecord)||void 0===t?void 0:t.value.capabilities,h.capabilities.value);return n()(S,{submitType:v,onSubmit:M,capabilitiesHaveChanged:w},void 0,de.cW.map((e=>de.gO[e].supportedBy[v]?n()("div",{style:{marginBottom:24}},e,n()(le.e,{keyName:e}),de.gO[e].fields.map((e=>{const{supportedBy:t,label:i,subtitle:a,caption:s}=de.Rh[e];if(t[v]&&("capabilities"!==e||F)){const t=we[e];return n()(ue,{label:i,subtitle:a,caption:s,error:h[e].error},e,n()(t,{autoFocus:Boolean(r&&"name"===e),spaces:_,currentValue:h[e].value,setErrorValue:t=>{y({field:e,error:t})},setNewValue:t=>{"submission_type"!==e?"client_secret"!==e&&"token"!==e&&y({value:t,field:e}):o.updateRecordTypeOnSubmission(t)}}))}return null}))):null)))}))},56200:(e,t,i)=>{i.d(t,{e:()=>g,T:()=>m});var o=i(98135),a=i.n(o),r=(i(33948),i(67294)),n=i.n(r),s=i(8848),l=i(82990),d=i(81710),u=i(89940),c=i(42001);function p(e){return"developer-integration-section-header-".concat(e)}function g(e){const{keyName:t}=e;return a()("div",{id:p(t),style:{fontSize:30,fontWeight:l.Z.fontWeight.bold,marginTop:24,marginBottom:24}},void 0,d.gO[t].title)}function m(e){const{type:t}=(0,u.Kw)(e.integrationFormStore),i=d.cW.filter((e=>d.gO[e].supportedBy[t])),[o,r]=n().useState(),g=o||i[0];return a()("div",{style:{display:"grid",gridTemplate:"none | auto | auto",marginTop:24,position:"sticky",top:16}},void 0,i.map((e=>a()("div",{},e,a()(c.Z,{style:{fontSize:15,height:28,marginTop:4,color:s.ZP.frontTextLight,width:"100%",...g===e&&{color:s.ZP.frontText,fontWeight:l.Z.fontWeight.medium}},onClick:()=>{const t=document.getElementById(p(e));t&&t.scrollIntoView(),r(e)}},void 0,d.gO[e].title)))))}},719:(e,t,i)=>{i.d(t,{Z:()=>f});var o=i(67154),a=i.n(o),r=i(98135),n=i.n(r),s=i(59713),l=i.n(s),d=(i(33948),i(67294)),u=i.n(d),c=i(66832),p=i(62727),g=i(98742);class m extends c.Z{constructor(...e){super(...e),l()(this,"handleKeyDown",(e=>{"Backspace"===e.key&&0===this.props.value.length&&this.props.onRemoveLastToken()}))}renderComponent(){const{device:e}=this.environment;return n()("div",{onClick:this.props.onClick,style:e.isMobile?this.getMobileWrapStyle():this.getDesktopWrapStyle()},void 0,this.props.tokens,this.renderInput())}renderInput(){const{device:e}=this.environment,t=0===this.props.tokens.length;return u().createElement(p.Z,a()({format:p.Z.Format.Transparent},(0,g.Z)({onKeyDown:this.handleKeyDown},{onChange:this.props.onChange}),{value:this.props.value,onSubmit:this.props.onSubmit,onBlur:this.props.onBlur,focus:this.props.focus,style:{...m.inputStyle,margin:e.isMobile?"0 8px 8px 0":"0 6px 6px 0"},readOnly:this.props.readOnly,inputStyle:{height:18},size:1,type:this.props.type,placeholder:t?this.props.placeholder:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}))}getDesktopWrapStyle(){return{display:"flex",flexWrap:"wrap",alignItems:"flex-start",minHeight:32,boxShadow:this.theme.inputBoxShadow,background:this.theme.inputBackground,borderRadius:3,fontSize:14,cursor:"text",overflow:"hidden",padding:"7px 9px 0px",...this.props.style}}getMobileWrapStyle(){return{...this.getDesktopWrapStyle(),fontSize:14,padding:"7px 10px 0"}}}l()(m,"inputStyle",{flexGrow:1,flexShrink:1,flexBasis:60,minWidth:60,width:"auto",lineHeight:"20px"});const f=m},81710:(e,t,i)=>{i.d(t,{cW:()=>m,gO:()=>f,Rh:()=>b,yb:()=>h,x6:()=>y,hl:()=>_,Xk:()=>M,bd:()=>k,tm:()=>Z,Xr:()=>B});var o=i(98135),a=i.n(o),r=(i(33948),i(67294),i(5366)),n=i(64442),s=i(97880),l=i(75246),d=i(74181),u=i(95477),c=i(33728),p=i(64002),g=i(42402);const m=["secrets","basic","oauth"],f={secrets:{title:a()(r.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.secrets",defaultMessage:"Secrets"}),supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["token","client_id","client_secret"]},basic:{title:a()(r.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.basic",defaultMessage:"Basic information"}),supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},fields:["name","icon","space","submission_type","capabilities"]},oauth:{title:a()(r.FormattedMessage,{id:"developerIntegrationForm.sectionHeader.oauth",defaultMessage:"OAuth Domain & URIs"}),supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},fields:["redirect_uris","website_url","tagline","privacy_policy_url","terms_of_use_url","email"]}},b={token:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.botToken.label",defaultMessage:"Internal Integration Token"})},client_id:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.integrationClientId.label",defaultMessage:"OAuth client ID"})},client_secret:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.integrationSecret.label",defaultMessage:"OAuth client secret"})},name:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.name.label",defaultMessage:"Name"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.name.subtitle",defaultMessage:"Name to identify your integration to users."})},icon:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.icon.label",defaultMessage:"Logo"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.icon.subtitle",defaultMessage:"512px x 512px in PNG format is recommended."})},space:{supportedBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},requiredBy:{"create-bot":!0,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.space.label",defaultMessage:"Associated workspace"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.space.subtitle",defaultMessage:"Select a workspace to install the integration to. You can upgrade the integration to use OAuth later."})},submission_type:{supportedBy:{"create-bot":!1,"update-bot":!0,"create-integration":!0,"update-integration":!1},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.submissionType.label",defaultMessage:"Integration type"})},redirect_uris:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.redirect_uris.label",defaultMessage:"Redirect URIs"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.redirect_uri.subtitle",defaultMessage:"Users will be redirected to this path after they have authenticated with Notion. The path will be appended with the authorization code for access and must have a protocol. It can’t contain URL fragments, relative paths or wildcards, and can’t be a public IP address."})},website_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.website_url.label",defaultMessage:"Website or homepage"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.website_url.subtitle",defaultMessage:"Used to link to your integration’s website or homepage in your integration page and authentication screens."})},tagline:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.tagline.label",defaultMessage:"Tagline"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.tagline.subtitle",defaultMessage:"A short description of what the integration does."})},privacy_policy_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.label",defaultMessage:"Privacy policy"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.privacy_policy_url.subtitle",defaultMessage:"Used to link to your integration’s privacy policy in your integration page and authentication screens."})},terms_of_use_url:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.label",defaultMessage:"Terms of use"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.terms_of_use_url.subtitle",defaultMessage:"Used to link to your integration’s terms of use in your integration page and authentication screens."})},email:{supportedBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!0,"update-integration":!0},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.email.label",defaultMessage:"Support email"}),subtitle:a()(r.FormattedMessage,{id:"developerIntegrationForm.email.subtitle",defaultMessage:"Used to link to your integration’s support email in your integration page and authentication screens."})},capabilities:{supportedBy:{"create-bot":!0,"update-bot":!0,"create-integration":!0,"update-integration":!0},requiredBy:{"create-bot":!1,"update-bot":!1,"create-integration":!1,"update-integration":!1},label:a()(r.FormattedMessage,{id:"developerIntegrationForm.capabilities.label",defaultMessage:"Capabilities"}),caption:a()(r.FormattedMessage,{id:"developerIntegrationForm.capabilities.caption",defaultMessage:"These requested capabilities will be displayed to users when they authorize your integration. See <inlinetextlink>developer docs</inlinetextlink> for more help.",values:{inlinetextlink:(...e)=>a()(g.Z,{href:"https://developers.notion.com/docs/authorization"},void 0,e)}})}},v={value:void 0,error:void 0},h={token:v,client_id:v,client_secret:v,name:v,icon:v,space:v,submission_type:v,tagline:v,email:v,website_url:v,privacy_policy_url:v,terms_of_use_url:v,redirect_uris:v,capabilities:v};function y(e,t){return"error"in t?{...e,[t.field]:{...e[t.field],error:t.error}}:{...e,[t.field]:{...e[t.field],...t.value&&{error:void 0},value:t.value}}}function _(e){const{userRootStore:t,formStoreState:i}=e;if("create-bot"===i.type){return{token:void 0,client_id:void 0,client_secret:void 0,name:void 0,icon:void 0,space:(t?t.getAdminSpaceStores():[])[0],submission_type:i.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:{read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0}}}if("update-bot"===i.type||"create-integration"===i.type){const e=i.startingRecord.value,o=t&&n.Z.createChildStore(t,{id:e.space_id,table:l.bx});return{token:i.startingRecord,client_id:void 0,client_secret:void 0,name:e.name,icon:e.icon,space:o,submission_type:i.recordTypeOnSubmission,tagline:void 0,email:void 0,website_url:void 0,privacy_policy_url:void 0,terms_of_use_url:void 0,redirect_uris:void 0,capabilities:C(e.capabilities)}}if("update-integration"===i.type){const e=i.startingRecord.value;return{token:void 0,client_id:i.startingRecord,client_secret:i.startingRecord,name:e.name,icon:e.info.icon,space:void 0,submission_type:i.recordTypeOnSubmission,tagline:e.info.tagline,email:e.info.email,website_url:e.info.website_url,privacy_policy_url:e.info.privacy_policy_url,terms_of_use_url:e.info.terms_of_use_url,redirect_uris:e.redirect_uris,capabilities:C(e.capabilities)}}(0,s.t1)(i)}function M(e){const{formData:t,formStateType:i}=e,o=[];for(const a of(0,s.Yd)(b)){const e=t[a].value;b[a].requiredBy[i]&&!e&&o.push(a)}return o}function F(e){const t=p.yn(e);if(!t)return{validated:!1};return p.Qc(t).hostname?{validated:!0}:{validated:!1}}function w(e){const t=p.yn(e);if(!t||!e)return;const i=t[t.length-1],o=e[e.length-1];return"/"===i&&"/"!==o?t.slice(0,t.length-1):t}const S=(0,r.defineMessages)({contentCapabilityErrorMessage:{id:"developerIntegrationsCreate.error.capabilities.invalidContent",defaultMessage:"At least one content capability must be requested."}});const I={email:function(e){const t=c.H3(e);return t?{validated:c.oH(t).valueOf()}:{validated:!1}},redirect_uris:function(e){return{validated:e.every((e=>(0,d.m)(u.default.domainBaseUrl,e)))}},website_url:F,privacy_policy_url:F,terms_of_use_url:F,capabilities:function(e){return e.read_content||e.insert_content||e.update_content?{validated:!0}:{validated:!1,errorMessageDescriptor:S.contentCapabilityErrorMessage}}};function k(e){const{formData:t,formStateType:i}=e,o=[];for(const a of(0,s.Yd)(t)){const e=t[a].value,r=b[a].supportedBy[i],n=I[a];if(r&&e&&n){const t=n(e);t.validated||o.push({fieldName:a,errorMessage:t.errorMessageDescriptor})}}return o}function Z(e){const{formData:t,formStateType:i}=e;return(0,s.Yd)(t).some((e=>b[e].supportedBy[i]&&t[e].error))}function C(e){const t={read_content:!1,update_content:!1,insert_content:!1,read_user_without_email:!1,read_user_with_email:!1};return e&&Object.entries(e).forEach((([e,i])=>{i&&(t[e]=!0)})),t}function T(e){if(!e)return;const t={};return Object.entries(e).forEach((([e,i])=>{i&&(t[e]=!0)})),t}function B(e){return{token:e.token.value,client_id:e.client_id.value,client_secret:e.client_secret.value,name:e.name.value,icon:e.icon.value,space:e.space.value,submission_type:e.submission_type.value,redirect_uris:(e.redirect_uris.value||[]).map((e=>w(e))),website_url:w(e.website_url.value),tagline:e.tagline.value,privacy_policy_url:w(e.privacy_policy_url.value),terms_of_use_url:w(e.terms_of_use_url.value),email:c.H3(e.email.value),capabilities:T(e.capabilities.value)}}},85227:(e,t,i)=>{i.d(t,{Z:()=>s});var o=i(77420),a=i(9844),r=i(52016);class n extends r.Z{getInitialState(){return{type:"create-bot",startingRecord:void 0,recordTypeOnSubmission:o.c}}updateRecordTypeOnSubmission(e){"create-integration"===this.state.type&&e===o.c&&this.setState({type:"update-bot",startingRecord:this.state.startingRecord,recordTypeOnSubmission:o.c}),"update-bot"===this.state.type&&e===a.K&&this.setState({type:"create-integration",startingRecord:this.state.startingRecord,recordTypeOnSubmission:a.K})}initializeNewForm(e){e.table===o.c&&this.setState({type:"update-bot",startingRecord:e,recordTypeOnSubmission:o.c}),e.table===a.K&&this.setState({type:"update-integration",startingRecord:e,recordTypeOnSubmission:a.K})}}const s=n},74181:(e,t,i)=>{i.d(t,{m:()=>r,u:()=>n});var o=i(64002),a=i(97880);function r(e,t){const i=o.yn(t);if(!i)return!1;const a=o.Qc(i);if(!a.hostname)return!1;if("http:"===a.protocol&&"localhost"===a.hostname)return!0;if("https:"!==a.protocol)return!1;const{hostname:r}=o.Qc(e);if(!r)return!1;const n=r.split(".").slice(-2,-1).join("."),s="".concat(n,".so"),l="".concat(n,".com");return a.hostname!==s&&!a.hostname.endsWith(".".concat(s))&&a.hostname!==l&&!a.hostname.endsWith(".".concat(l))}function n(e,t){const i=t.match(/^(h|$)(t|$)(t|$)(p|$)(s|$)(:|$)(\/|$)(\/|$).*$/),o=t.match(/^(h|$)(t|$)(t|$)(p|$)(:|$)(\/|$)(\/|$).*$/);return[t,i?void 0:"https://".concat(t),o?void 0:"http://".concat(t)].filter(a.$K).filter((t=>t&&r(e,t)))}}}]);